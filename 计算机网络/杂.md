## TCP的流量控制与拥塞控制的区别

1. **TCP流量控制**

  流量控制就是让发送方的**发送速率不要太快**，要让接收方**来的及接收**。原理是通过**确认报文中窗口字段**来控制发送方的发送速率，**发送方的发送窗口大小不能超过接收方给出窗口大小**。

考虑一种特殊的情况，接收方向发送方发送了零窗口的报文段后，接收方又有了一些存储空间。**消息错误**。与接收方向发送方发送了非零窗口的报文段。然而这个报文段在传送过程中丢失了。**发送方的发送窗口一直为零导致死锁。**

 为了解决这个问题，每个连接设置有**持续计时器**，只要连接的一方收到零窗口通知，就启动持续计数器。若持续计数器设置的时间到期，就发送一个零窗口探测报文段。

**2.TCP的拥塞控制**

拥塞控制:**防止过多的数据注入到网络中**，这样可以使网络中的**路由器或链路过载**。如果网络出现拥塞，分组将会丢失，此时发送方会继续重传，从而导致网络拥塞程度更高。因此当出现拥塞时，应当**控制发送方的速率。**这一点和流量控制很像，但是出发点不同。**流量控制是为了让接收方能来得及接收（端对端的通信），而拥塞控制是为了降低整个网络的拥塞程度（全局性）。**

TCP进行拥塞控制的算法有四种，即慢开始，拥塞避免，快重传，快恢复。

![image-20211211200745656](C:\Users\86159\AppData\Roaming\Typora\typora-user-images\image-20211211200745656.png)

发送的最初执行慢开始，令 cwnd = 1，发送方只能发送 1 个报文段；当收到确认后，将 cwnd 加倍，因此之后发送方能够发送的报文段数量为：2、4、8 ...

![image-20211211200841992](C:\Users\86159\AppData\Roaming\Typora\typora-user-images\image-20211211200841992.png)

快重传算法要求接收方不要等待自己发送数据才进行捎带确认，而是**立即发送确认**。即使收到失序的报文段对已发送的报文段的重复确认。发送方**一连收到3个重复确认就应当立即进行重传**。

